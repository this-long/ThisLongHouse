(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{560:function(t,s,a){"use strict";a.r(s);var e=a(4),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"vue-打包后-index-文件在本地无法访问的问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-打包后-index-文件在本地无法访问的问题"}},[t._v("#")]),t._v(" Vue 打包后 index 文件在本地无法访问的问题")]),t._v(" "),a("p",[t._v("我们在 Vue 项目开发完毕后，直接打包项目会发现项目空白，无法查看。这是因为 vue-cli 生成的模板项目打包后的文件默认需要放到静态资源服务器上，而且还必须是根目录。所以我们在本地无法修改。所以我们需要修改一下打包输出路径。")]),t._v(" "),a("p",[t._v("不通版本的脚手架的修改方法是不同的，现在一般是 vue-cli 4.x 版本居多。")]),t._v(" "),a("h2",{attrs:{id:"vue-cli-2-x-版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-2-x-版本"}},[t._v("#")]),t._v(" vue-cli 2.x 版本")]),t._v(" "),a("p",[t._v("在 config 文件夹下的 index.js 中修改 assetsPublicPath: './xxx'（xxx 为服务器上子目录名称，一下同上）")]),t._v(" "),a("h2",{attrs:{id:"vue-cli-3-x-版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-3-x-版本"}},[t._v("#")]),t._v(" vue-cli 3.x 版本")]),t._v(" "),a("p",[t._v("在 cli3 中 assetsPublicPath 属性被 baseUrl 取代，只需要在 vue.config.js 添加 baseUrl 属性 设为 ‘./xxx’ 即可")]),t._v(" "),a("h2",{attrs:{id:"vue-cli-4-x-版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-4-x-版本"}},[t._v("#")]),t._v(" vue-cli 4.x 版本")]),t._v(" "),a("p",[t._v("与 cli3 相同都是修改 vue.config.js 文件 ，但将属性换为 publicPath:'./xxx'")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//判断是生产还是本地环境。本地环境则不需要配置额外的子目录名称")]),t._v("\n  publicPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"production"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/production-sub-path/"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"解决本地文件跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决本地文件跨域"}},[t._v("#")]),t._v(" 解决本地文件跨域")]),t._v(" "),a("p",[t._v("但是即便配置完成了我们会发现项目依旧打不开，查看报错发现")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nAccess to script at "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'file:///D:/a-work-fish/%E5%9F%BA%E4%BA%8EGIS%E7%9A%84%E5%9B%BD%E5%86%85%E8%91%97%E5%90%8D%E9%AB%98%E6%A0%A1%E6%9F%A5%E8%AF%A2%E7%B3%BB%E7%BB%9F/GIS-university/dist/js/chunk-vendors.6c4ffe1b.js'")]),t._v(" from origin "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'null'")]),t._v(" has been blocked by "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CORS")]),t._v(" policy"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Cross origin requests are only supported "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" protocol schemes"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chrome"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("extension"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" edge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" chrome"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("untrusted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("`\n")])])]),a("p",[t._v("可以看到是出现跨域了。因为你是在本地打开的文件，而 file 协议并不支持，只有 http, data, chrome, chrome-extension, https 这些协议是支持跨域请求的。浏览器地址栏显示的是本机地址，确实不是 http 协议。")]),t._v(" "),a("p",[t._v("解决方案\nvs code 下载 "),a("code",[t._v("Live Server")]),t._v(" 插件，然后进入项目右键选择"),a("code",[t._v("Open width Live Server")]),t._v("使用其打开。问题解决。")])])}),[],!1,null,null,null);s.default=r.exports}}]);